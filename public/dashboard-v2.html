<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M0 Ticker Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/design-system.css">
    <style>
        /* Dashboard-specific styles */
        .dashboard-container {
            min-height: 100vh;
            padding: var(--space-xl);
            background: linear-gradient(135deg, var(--primary-black) 0%, var(--charcoal) 50%, var(--smoke) 100%);
            position: relative;
        }
        
        .dashboard-header {
            text-align: center;
            margin-bottom: var(--space-xxl);
            position: relative;
        }
        
        .dashboard-title {
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary-white), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--space-md);
            letter-spacing: -0.02em;
            position: relative;
        }
        
        .dashboard-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-secondary), var(--primary-white));
            border-radius: 2px;
        }
        
        .dashboard-subtitle {
            color: var(--silver);
            font-size: 1rem;
            font-weight: 400;
            opacity: 0.8;
        }
        
        .widgets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: var(--space-xl);
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .widget-card {
            position: relative;
            overflow: hidden;
            transition: all var(--transition-medium);
        }
        
        .widget-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-secondary), var(--primary-white));
            opacity: 0;
            transition: opacity var(--transition-medium);
        }
        
        .widget-card:hover::before {
            opacity: 1;
        }
        
        .widget-header {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }
        
        .widget-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--glass-bg);
            border-radius: var(--radius-md);
            border: 1px solid var(--glass-border);
            font-size: 16px;
            color: var(--accent-secondary);
        }
        
        .widget-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--primary-white);
            flex: 1;
        }
        
        .connection-status {
            position: fixed;
            top: var(--space-xl);
            right: var(--space-xl);
            z-index: var(--z-overlay);
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--space-md) var(--space-lg);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            box-shadow: var(--glass-shadow);
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: var(--radius-full);
            background: var(--steel);
            animation: pulse 2s infinite;
        }
        
        .status-dot.connected {
            background: var(--accent-secondary);
        }
        
        .status-text {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--silver);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }
        
        .form-row.single {
            grid-template-columns: 1fr;
        }
        
        .input-group {
            position: relative;
        }
        
        .input-icon {
            position: absolute;
            left: var(--space-md);
            top: 50%;
            transform: translateY(-50%);
            color: var(--steel);
            font-size: 14px;
            pointer-events: none;
        }
        
        .input-group .form-control {
            padding-left: calc(var(--space-md) * 2.5);
        }
        
        .btn-group {
            display: flex;
            gap: var(--space-sm);
            flex-wrap: wrap;
        }
        
        .btn-group .btn {
            flex: 1;
            min-width: 120px;
        }
        
        .color-input {
            width: 60px !important;
            height: 44px !important;
            padding: 4px !important;
            border-radius: var(--radius-md);
            cursor: pointer;
        }
        
        @media (max-width: 768px) {
            .dashboard-container {
                padding: var(--space-lg);
            }
            
            .widgets-grid {
                grid-template-columns: 1fr;
                gap: var(--space-lg);
            }
            
            .form-row {
                grid-template-columns: 1fr;
                gap: var(--space-sm);
            }
            
            .connection-status {
                position: static;
                margin-bottom: var(--space-lg);
                justify-self: center;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .btn-group .btn {
                width: 100%;
            }
        }
        
        /* Loading animations */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }
        
        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid var(--glass-border);
            border-radius: 50%;
            border-top-color: var(--accent-secondary);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</head>
<body>
    <div class="dashboard-container fade-in">
        <!-- Connection Status -->
        <div class="connection-status">
            <div class="status-dot" id="status-dot"></div>
            <span class="status-text" id="status-text">Connecting...</span>
        </div>
        
        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <h1 class="dashboard-title">M0 Ticker Dashboard</h1>
            <p class="dashboard-subtitle">Professional streaming widget management</p>
        </div>

        <!-- Widgets Grid -->
        <div class="widgets-grid">
            <!-- Ticker Widget -->
            <div class="card widget-card">
                <div class="widget-header">
                    <div class="widget-icon">📺</div>
                    <h2 class="widget-title">Ticker Control</h2>
                    <div class="status" id="ticker-status">inactive</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Message</label>
                    <div class="input-group">
                        <span class="input-icon">💬</span>
                        <input type="text" id="ticker-message" class="form-control" placeholder="Enter ticker message...">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Speed</label>
                        <select id="ticker-speed" class="form-control">
                            <option value="slow">Slow</option>
                            <option value="medium" selected>Medium</option>
                            <option value="fast">Fast</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Font Size</label>
                        <select id="ticker-fontsize" class="form-control">
                            <option value="small">Small</option>
                            <option value="medium" selected>Medium</option>
                            <option value="large">Large</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Text Color</label>
                        <input type="color" id="ticker-color" class="form-control color-input" value="#ffffff">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Background</label>
                        <input type="color" id="ticker-bg" class="form-control color-input" value="#000000">
                    </div>
                </div>
                
                <div class="btn-group">
                    <button class="btn btn-primary" id="update-ticker">Update Ticker</button>
                    <button class="btn btn-secondary" id="hide-ticker">Hide</button>
                </div>
            </div>

            <!-- Popup Widget -->
            <div class="card widget-card">
                <div class="widget-header">
                    <div class="widget-icon">💬</div>
                    <h2 class="widget-title">Popup Control</h2>
                    <div class="status" id="popup-status">inactive</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Title</label>
                    <div class="input-group">
                        <span class="input-icon">📝</span>
                        <input type="text" id="popup-title" class="form-control" placeholder="Popup title...">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Message</label>
                    <textarea id="popup-message" class="form-control textarea" placeholder="Enter popup message..."></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Duration (seconds)</label>
                        <input type="number" id="popup-duration" class="form-control" value="5" min="1" max="30">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Position</label>
                        <select id="popup-position" class="form-control">
                            <option value="top">Top</option>
                            <option value="center" selected>Center</option>
                            <option value="bottom">Bottom</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Background Color</label>
                        <input type="color" id="popup-bg" class="form-control color-input" value="#1a1a1a">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Text Color</label>
                        <input type="color" id="popup-color" class="form-control color-input" value="#ffffff">
                    </div>
                </div>
                
                <div class="btn-group">
                    <button class="btn btn-primary" id="show-popup">Show Popup</button>
                    <button class="btn btn-secondary" id="hide-popup">Hide</button>
                </div>
            </div>

            <!-- BRB Widget -->
            <div class="card widget-card">
                <div class="widget-header">
                    <div class="widget-icon">⏸️</div>
                    <h2 class="widget-title">BRB Overlay</h2>
                    <div class="status" id="brb-status">inactive</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">BRB Message</label>
                    <div class="input-group">
                        <span class="input-icon">⏰</span>
                        <input type="text" id="brb-message" class="form-control" placeholder="Be Right Back..." value="Be Right Back">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Subtitle</label>
                    <input type="text" id="brb-subtitle" class="form-control" placeholder="Taking a quick break...">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Animation Style</label>
                        <select id="brb-animation" class="form-control">
                            <option value="fade">Fade</option>
                            <option value="slide" selected>Slide</option>
                            <option value="bounce">Bounce</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Opacity</label>
                        <select id="brb-opacity" class="form-control">
                            <option value="0.7">70%</option>
                            <option value="0.8" selected>80%</option>
                            <option value="0.9">90%</option>
                            <option value="1">100%</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Background Color</label>
                        <input type="color" id="brb-bg" class="form-control color-input" value="#000000">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Text Color</label>
                        <input type="color" id="brb-color" class="form-control color-input" value="#ffffff">
                    </div>
                </div>
                
                <div class="btn-group">
                    <button class="btn btn-primary" id="show-brb">Show BRB</button>
                    <button class="btn btn-secondary" id="hide-brb">Hide</button>
                </div>
            </div>

            <!-- Theme Widget -->
            <div class="card widget-card">
                <div class="widget-header">
                    <div class="widget-icon">🎨</div>
                    <h2 class="widget-title">Theme Control</h2>
                    <div class="status active">active</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Theme Preset</label>
                    <select id="theme-preset" class="form-control">
                        <option value="urban" selected>Urban Dark</option>
                        <option value="neon">Neon Cyber</option>
                        <option value="minimal">Minimal Light</option>
                        <option value="gaming">Gaming RGB</option>
                    </select>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Primary Accent</label>
                        <input type="color" id="theme-primary" class="form-control color-input" value="#00ff88">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Secondary Accent</label>
                        <input type="color" id="theme-secondary" class="form-control color-input" value="#ffffff">
                    </div>
                </div>
                
                <div class="form-row single">
                    <div class="form-group">
                        <label class="form-label">Global Opacity</label>
                        <input type="range" id="theme-opacity" class="form-control" min="0.1" max="1" step="0.1" value="0.9">
                    </div>
                </div>
                
                <div class="btn-group">
                    <button class="btn btn-primary" id="apply-theme">Apply Theme</button>
                    <button class="btn btn-secondary" id="reset-theme">Reset</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/js/websocket-client.js"></script>
    <script src="/js/dashboard-controller.js"></script>
    <script>
        // Enhanced dashboard initialization with GSAP animations
        document.addEventListener('DOMContentLoaded', function() {
            // Animate widgets on load
            gsap.from('.widget-card', {
                duration: 0.8,
                y: 50,
                opacity: 0,
                stagger: 0.2,
                ease: 'power3.out'
            });
            
            // Animate header
            gsap.from('.dashboard-title', {
                duration: 1,
                y: -30,
                opacity: 0,
                ease: 'power3.out',
                delay: 0.3
            });
            
            gsap.from('.dashboard-subtitle', {
                duration: 0.8,
                y: -20,
                opacity: 0,
                ease: 'power3.out',
                delay: 0.5
            });
            
            // Enhanced connection status updates
            function updateConnectionStatus(connected) {
                const dot = document.getElementById('status-dot');
                const text = document.getElementById('status-text');
                
                if (connected) {
                    dot.classList.add('connected');
                    text.textContent = 'Connected';
                    text.style.color = 'var(--accent-secondary)';
                } else {
                    dot.classList.remove('connected');
                    text.textContent = 'Disconnected';
                    text.style.color = 'var(--steel)';
                }
            }
            
            // Enhanced button hover effects
            document.querySelectorAll('.btn').forEach(button => {
                button.addEventListener('mouseenter', function() {
                    gsap.to(this, {duration: 0.3, scale: 1.02, ease: 'power2.out'});
                });
                
                button.addEventListener('mouseleave', function() {
                    gsap.to(this, {duration: 0.3, scale: 1, ease: 'power2.out'});
                });
                
                button.addEventListener('click', function() {
                    gsap.to(this, {duration: 0.1, scale: 0.95, yoyo: true, repeat: 1, ease: 'power2.inOut'});
                });
            });
            
            // Widget status animations
            function updateWidgetStatus(widgetId, isActive) {
                const statusElement = document.getElementById(`${widgetId}-status`);
                if (statusElement) {
                    statusElement.className = isActive ? 'status active' : 'status inactive';
                    statusElement.textContent = isActive ? 'active' : 'inactive';
                    
                    // Pulse animation for status change
                    gsap.from(statusElement, {duration: 0.5, scale: 1.2, ease: 'elastic.out(1, 0.3)'});
                }
            }
            
            // Initialize dashboard controller
            if (window.DashboardController) {
                window.dashboardController = new DashboardController();
            }
            
            // Export functions for use by dashboard controller
            window.updateConnectionStatus = updateConnectionStatus;
            window.updateWidgetStatus = updateWidgetStatus;
        });
    </script>
</body>
</html>